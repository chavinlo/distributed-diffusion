<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>serverlist</title>
  <meta content="serverlist" property="og:title">
  <meta content="serverlist" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/styles.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Droid Sans:400,700","Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body-8">
  <div data-current="Tab 1" data-easing="ease" data-duration-in="300" data-duration-out="100" class="tabs-main w-tabs">
    <div class="tabs-main-menu w-tab-menu">
      <a data-w-tab="Tab 1" class="w-inline-block w-tab-link w--current">
        <div>Swarm List</div>
      </a>
      <a data-w-tab="Tab 2" class="w-inline-block w-tab-link">
        <div>Statistics</div>
      </a>
      <a data-w-tab="Tab 3" class="w-inline-block w-tab-link">
        <div>Configuration</div>
      </a>
    </div>
    <div class="tabs-main-content w-tab-content">
      <div data-w-tab="Tab 1" class="w-tab-pane w--tab-active">
        <ol role="list" class="swarm-server-list w-list-unstyled">
          <li id="swarm-server-entry-0" class="swarm-server-entry">
            <div class="swarm-server-entry-logo"><img id="swarm-server-entry-logo" loading="lazy" src="images/snailgang.png" alt="" class="swarm-server-entry-logo-icon"></div>
            <div class="swarm-server-entry-info">
              <h1 id="swarm-server-entry-info-header" class="swarm-server-entry-info-header"></h1>
              <div id="swarm-server-entry-info-author" class="swarm-server-entry-info-author"></div>
              <p id="swarm-server-entry-info-desc"></p>
            </div>
            <div class="div-block-29">
              <div id="swarm-server-entry-join-stats-peers"></div>
              <div id="swarm-server-entry-join-stats-tflops"></div>
              <a id="swarm-server-entry-join-btn" href="#" class="button-4 w-button">Join</a>
            </div>
          </li>
        </ol>
        <script>
          const template = document.querySelector("#swarm-server-entry-0");
          template.remove();

          fetch("http://127.0.0.1:4000/servers")
            .then((response) => response.json())
            .then((data) => {

              data.forEach((server) => {
                if(server.info.logo.includes("i.imgur.com")){
                  server.info.logo = "images/snailgang.png"
                }
              });
              
              const list = document.querySelector(".swarm-server-list");

              data.forEach((server) => {
                const entry = template.cloneNode(true);
                entry.setAttribute("id", `swarm-server-entry-${server.id}`);

                const logo = entry.querySelector("#swarm-server-entry-logo");
                logo.setAttribute("src", server.info.logo);
                logo.setAttribute("alt", server.info.name);

                const title = entry.querySelector("#swarm-server-entry-info-header");
                title.textContent = server.info.name;

                const author = entry.querySelector("#swarm-server-entry-info-author");
                author.textContent = server.info.author;

                const desc = entry.querySelector("#swarm-server-entry-info-desc");
                desc.textContent = server.info.desc;

                const peers = entry.querySelector("#swarm-server-entry-join-stats-peers");
                peers.textContent = `ðŸ‘¥ ${server.peers} Peers Online `;

                const tflops = entry.querySelector("#swarm-server-entry-join-stats-tflops");
                tflops.textContent = `âš¡ ${server.resources.tflops} TFLOPs`;

                const joinButton = entry.querySelector("#swarm-server-entry-join-btn");
                joinButton.setAttribute("href", `join?server=${server.id}`);

                list.appendChild(entry);
              });
            });
        </script>
      </div>
      <div data-w-tab="Tab 2" class="w-tab-pane">
        <div class="stats-display">
          <div class="trainer-stats-logs">
            <h1 class="trainer-stats-header">Logs</h1>
            <div id="stats-logs-panel" class="stats-logs-panel"></div>
          </div>
          <div class="trainer-stats-info">
            <h1 class="trainer-stats-header">Stats</h1>
            <ol role="list" class="w-list-unstyled">
              <li class="stats-info-entry">
                <div class="stats-info-text">Loss: 0.10</div>
              </li>
              <li class="stats-info-entry">
                <div class="stats-info-text">Epoch: 3</div>
              </li>
              <li class="stats-info-entry">
                <div class="stats-info-text">Learning Rate:Â 1e-5</div>
              </li>
              <li class="stats-info-entry">
                <div class="stats-info-text">Local Step: 1030</div>
              </li>
              <li class="stats-info-entry">
                <div class="stats-info-text">Local Step/s: 3</div>
              </li>
              <li class="stats-info-entry">
                <div class="stats-info-text">Global Step: 104,002</div>
              </li>
              <li class="stats-info-entry">
                <div class="stats-info-text">Global Step/s: 94</div>
              </li>
            </ol>
          </div>
        </div>
      </div>
      <div data-w-tab="Tab 3" class="w-tab-pane">
        <div class="config-display">
          <h1 class="config-header">Configuration</h1>
          <div id="config-form" class="form-block-3 w-form">
            <form id="wf-form-configuration" name="wf-form-configuration" data-name="configuration" method="post">
              <div class="div-block-31">
                <div class="div-block-32"><label for="max-vram-input">Max. GPU Vram Usage</label><input type="number" class="int-form-field w-input" maxlength="256" name="max-vram" data-name="max-vram" placeholder="" id="max-vram-input" required=""></div>
                <div class="div-block-33"><label for="mode-input">Mode</label><select id="mode-input" name="mode" data-name="mode" required="" class="w-select">
                    <option value="client">Client</option>
                    <option value="relay">Relay</option>
                  </select></div>
                <div class="div-block-33"><label for="prefer-input">Prefer</label><select id="prefer-input" name="prefer" data-name="prefer" required="" class="w-select">
                    <option value="speed">Speed</option>
                    <option value="resources">Resources</option>
                  </select></div>
              </div>
              <div class="div-block-31">
                <div class="div-block-32"><label for="hftoken-input">HuggingFace Token</label><input type="text" class="w-input" maxlength="256" name="hftoken" data-name="hftoken" placeholder="" id="hftoken-input"></div>
                <div class="div-ports-config">
                  <div class="div-block-34"><label for="int-tcp-input" class="field-label-2">Internal TCP</label><input type="number" class="text-field-6 w-input" maxlength="256" name="int-tcp" data-name="int-tcp" placeholder="" id="int-tcp-input"></div>
                  <div class="div-block-34"><label for="ext-tcp-input" class="field-label-2">External TCP</label><input type="number" class="text-field-6 w-input" maxlength="256" name="ext-tcp" data-name="ext-tcp" placeholder="" id="ext-tcp-input"></div>
                </div>
              </div>
              <div class="div-block-31">
                <div class="div-block-32"><label for="username-input">Username</label><input type="text" class="w-input" maxlength="256" name="username" data-name="username" placeholder="" id="username-input"></div>
                <div class="div-block-33"><label for="password-input">Password</label><input type="password" class="w-input" maxlength="256" name="password" data-name="password" placeholder="" id="password-input"></div>
              </div><input type="submit" value="Save" data-wait="Saving..." id="save-config-button" class="w-button">
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=63ad042b461adb7892d4ed44" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>